<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Settings</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../css/user.css">
  <link rel="stylesheet" href="../../css/account.css">
  <link rel="icon" type="image/png" href="/src/IMG/US.png">
</head>

<body>
  <div class="profile-settings-wrapper">
    <div class="profile-left">
      <div class="profile-header">
        <i class="fa-solid fa-arrow-left" onclick="goBackToIndex()" style="cursor: pointer;"></i>
        <span>PROFILE SETTINGS</span>
        <button class="edit-profile-btn" type="button" aria-label="Edit Profile">
          Edit Profile <i class="fa-regular fa-pen-to-square"></i>
        </button>
      </div>
      <div class="profile-avatar" id="profileImageContainer">
        <img id="profileImg" src="" alt="Profile Picture"
          style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: none;">
        <i id="placeholderIcon" class="fa-solid fa-user" style="font-size: 2rem; color: #666;"></i>
        <div id="editProfileIcon" class="edit-profile-icon" style="display: none;">
          <i class="fa-solid fa-camera"></i>
        </div>
      </div>
      <div class="profile-section-titles">General</div>
      <div class="profile-fields">
        <div class="profile-field">
          <div class="profile-label">Full Name
            <div class="profile-desc">Your display name</div>
          </div>
          <input class="profile-input" type="text" name="fullName">
        </div>
        <div class="profile-field">
          <div class="profile-label">Contact Number</div>
          <input class="profile-input" type="text" name="contactNumber">
        </div>
        <!-- Address removed per user request -->
      </div>
      <div class="profile-section-title">Security</div>
      <div class="profile-fields">
        <div class="profile-field">
          <div class="profile-label">Email Address</div>
          <input class="profile-input" type="text" name="email">
        </div>
        <div class="profile-field">
          <div class="profile-label">Password</div>
          <input class="profile-input" type="password" name="password" placeholder="••••••••">
        </div>
      </div>
      <!-- Save/Cancel buttons (hidden by default) -->
      <div class="profile-btn-row" id="saveCancelButtons" style="display: none;">
        <button class="btn-cancel" type="button" onclick="cancelEdit()">
          <i class="fa-solid fa-times"></i> Cancel
        </button>
        <button class="btn-save" type="button" onclick="saveProfileData()">
          <i class="fa-solid fa-check"></i> Save Changes
        </button>
      </div>

      <a id="logout-link" class="logout-link" href="#" role="button" aria-label="Log the user out"
        onclick="handleLogout(event)" style="cursor: pointer;">Log out</a>
    </div>
    <div class="profile-divider"></div>
    <div class="profile-right">
      <div class="order-history-title">Order History</div>

      <!-- Order History Container -->
      <div id="order-history-container" class="order-history-container">
        <div id="order-loading" class="loading-message" style="display: none;">
          <i class="fas fa-spinner fa-spin"></i> Loading your orders...
        </div>

        <div id="no-orders" class="no-orders-message" style="display: none;">
          <i class="fas fa-receipt"></i>
          <p>No orders found</p>
          <small>Your order history will appear here once you place an order</small>
        </div>

        <div id="orders-list" class="orders-list">
          <!-- Orders will be populated here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Authentication Manager for Auto Logout -->
  <script src="../javascript/auth-manager.js"></script>

  <!-- Firebase Orders Management -->
  <script src="../javascript/firebase-orders.js"></script>

  <!-- Cloudinary Upload Script -->
  <script src="../../cloud.js"></script>


  <script src="../javascript/profilesettings.js"></script>
</body>

</html>